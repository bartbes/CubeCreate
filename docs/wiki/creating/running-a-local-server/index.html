<html><head><title>Running a Local Server</title></head><body><table width="100%"><tr valign="top"><td width="150px"><table><tr><th align="left">Navigation</th></tr><tr><td><small><a href="../../community/index.html">Community</a></small></td></tr><tr><td><small><a href="../../configuring/index.html">Configuring</a></small></td></tr><tr><td><small><a href="../../creating/index.html">Creating</a></small></td></tr><tr><td><small><a href="../../faq---general/index.html">FAQ - General</a></small></td></tr><tr><td><small><a href="../../info-for-sauerbraten-users/index.html">Info for Sauerbraten Users</a></small></td></tr><tr><td><small><a href="../../introduction/index.html">Introduction</a></small></td></tr><tr><td><small><a href="../../known-issues/index.html">Known Issues</a></small></td></tr><tr><td><small><a href="../../home/index.html">Main Page</a></small></td></tr><tr><td><small><a href="../../notes/index.html">Notes</a></small></td></tr><tr><td><small><a href="../../playing/index.html">Playing</a></small></td></tr><tr><td><small><a href="../../troubleshooting/index.html">Troubleshooting</a></small></td></tr></table></td><td>&#160;</td><td><div class="hentry webpage" id="http://sites.google.com/feeds/content/syntensity.com/wiki/711206709457906249"><div><a href="../index.html">Creating</a> &gt; </div><h3><span class="entry-title">Running a Local Server</span></h3><div><div class="entry-content"><div xmlns='http://www.w3.org/1999/xhtml'><table class='sites-layout-name-one-column sites-layout-hbox' cellspacing='0'><tbody><tr><td class='sites-layout-tile sites-tile-name-content-1'><div dir='ltr'>It is sometimes useful to run a local server instance, that is, a server instance on the same machine you are running the game client on. Reasons you might want to do this include:<br/><ul><li>Lets you change the map scripts without uploading them to a remote server. This is useful because you may need to edit the scripts quite a lot during debugging and so forth, and because uploads take time.</li><li>You have more direct control and contact with the server - so you can see how much CPU it's using, stuff it logs to the console (like errors and warnings), and so forth.</li><li>You don't need to find a free remote server instance.</li><li>You can use some editing commands that require that you be the only client logged into the server, like heightmaps. However, you can also do this on a remote server, by selecting 'request private edit mode...' in the client menu.</li></ul>There are some disadvantages, however:<br/><ul><li>With the client and server on the same machine, you will <b>not</b> notice network delays, because communication is pretty much instant. This means that it is not possible to debug 'responsiveness' issues in your maps, that is, stuff that makes the game responsive even though some of the logic is on remote machines.<br/></li><li>You need to set up the server, perhaps telling your firewall to let it use the ports it needs, and so forth.</li></ul><h2><a name='TOC-How-to-do-it'/>How to do it</h2><ul><li>Pick a 'home directory' for your server. This is the first parameter you pass to the server when you run it (with <b>intensity_server.sh </b>or<b> intensity_server.bat</b>). So, for example, running <b>intensity_server.bat my_server</b> will set the home directory to my_server\.<br/></li><ul><li>If you <b>don't</b> specify the directory, it will use something under your user's home directory, this depends on what operating system you are using (on Windows XP, it would be under C:\Documents and Settings and then your user, in Vista it would be under C:\Users and then your user, in Linux it would be in ~/. Under the operating system's home directory, there will be a directory called <b>intensityengine_server</b>, or with a '.' before it on Linux.)</li></ul><li>After running the server for the first time, a settings.cfg file will appear in the home directory. There are several parameters of interest there (we list them as [Category] / Element):</li><ul><li><b>[Logging] / level</b>: How much output to log to the console. Use DEBUG for more information, INFO for a lot more information.</li><li><b>Versions 1.0.2 and earlier:</b></li><ul><li><b>[Activity] / force_map_asset_id</b>: The UUID (identifier) of the map to run. To find it, you can view the map asset (not the activity) on the main website. The last part of the URL is the UUID, for example,<br/><br/><div style='margin-left:40px;font-family:courier new,monospace'>http://www.syntensity.com:8888/tracker/asset/view/<u><b>06c9b70b_14d7_4afc_bd63_56588670c1ef</b></u>/<br/><br/></div>(so, <span style='font-family:courier new,monospace'>06c9b70b_14d7_4afc_bd63_56588670c1ef</span> in this case).</li><li><b>[Activity] / force_activity_id</b>: Setting this is optional; if set, the activity the server is running will be listed correctly on the master's list of server instances. If you do set it, this should be a UUID for the activity, which you can find like finding the UUID for the map asset (but when viewing the activity).</li><li>Note: If there isn't an [Activity] section, simply add one.<br/></li></ul><li><b>Versions 1.0.3, trunk, and later:</b></li><ul><li><b>[Activity] / force_activity_id</b>: You can either place an actual activity ID (as described above), or simply paste the full URL to the activity, from the website. Such URLs look something like<br/><br/><div style='margin-left:40px'><span style='font-family:courier new,monospace'>http://www.syntensity.com:8888/tracker/activity/view/afe3c7e1_caeb_4320_9116_6e2ae8ad6242/</span><br/><br/></div>You can find the URL by clicking on the activity on the <a rel='nofollow' href='http://www.syntensity.com:8888/tracker/activities/'>activities page</a>.<br/></li><li>Note that you don't need to set <b>force_map_asset_id</b>, it will be discovered automatically based on the activity ID. (However, you can still define it, and not define force_activity_id, for backwards compatibility.)</li><li>Note: If there isn't an [Activity] section, simply add one.<br/></li></ul></ul></ul><ul><li>After setting the activity information, run the server. Then run the client, log into the master, and select '<b>local connection...</b>' to connect to your server.</li><li>You should now be able to work on your map.</li></ul>Notes:<br/><ul><li>While the server is local, you are still logged in to the Syntensity master server. This means that if you do 'Upload map...' it will be uploaded to the master.</li><ul><li>Note that uploading the map will update it <b>for everyone</b>, as you are uploading it to the master server. The master server won't let you do that if you aren't the owner of the asset, in that case the upload will fail with an error.<br/></li></ul><li>For smaller edits, you can do the following:</li><ul><li>Change the map files <b>for both the client and the server</b>, then run them.</li><li>The client's map files are in the client's home directory, under packages/base/mapname/, and the server's are in the server's home directory, also under packages/base/mapname/, where 'mapname' is the name of the map.<br/></li><li>Any changes made to both those map directories will take effect when you work locally. This lets you be 'out of sync' with the remote master server, when you are testing local changes.</li><li>Note that if you change just the client's files, or just the server's - or change both, but don't restart the server - then, with the client and server not running the same code, strange things may happen.</li><li>Note also that if you change the <i><b>server</b></i>'s map.js, and do 'upload map' from the <i><b>client</b></i>, then the client will upload the <i><b>old</b></i> version. After the upload to the master server, both client and server will get the latest version from the master, which will have the old map.js - overriding what you changed in the server's map.js.</li><li>One helpful approach here is to use a symlink (on operating systems that support that), so that the client and server are really using the same /packages directory, even though they have different home directories.<br/></li></ul></ul></div></td></tr></tbody></table></div></div><br /><small>Updated on <abbr class="updated" title="2009-10-27T09:45:55.378Z">Oct 27, 2009</abbr> by <span class="author"><span class="vcard"><a class="fn" href="mailto:alonzakai@syntensity.com">Alon Zakai</a></span></span> (Version <span class="sites:revision">14</span>)</small><br /><br /></div></div></td></tr></table></body></html>