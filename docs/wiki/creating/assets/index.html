<html><head><title>Assets</title></head><body><table width="100%"><tr valign="top"><td width="150px"><table><tr><th align="left">Navigation</th></tr><tr><td><small><a href="../../community/index.html">Community</a></small></td></tr><tr><td><small><a href="../../configuring/index.html">Configuring</a></small></td></tr><tr><td><small><a href="../../creating/index.html">Creating</a></small></td></tr><tr><td><small><a href="../../faq---general/index.html">FAQ - General</a></small></td></tr><tr><td><small><a href="../../info-for-sauerbraten-users/index.html">Info for Sauerbraten Users</a></small></td></tr><tr><td><small><a href="../../introduction/index.html">Introduction</a></small></td></tr><tr><td><small><a href="../../known-issues/index.html">Known Issues</a></small></td></tr><tr><td><small><a href="../../home/index.html">Main Page</a></small></td></tr><tr><td><small><a href="../../notes/index.html">Notes</a></small></td></tr><tr><td><small><a href="../../playing/index.html">Playing</a></small></td></tr><tr><td><small><a href="../../troubleshooting/index.html">Troubleshooting</a></small></td></tr></table></td><td>&#160;</td><td><div class="hentry webpage" id="http://sites.google.com/feeds/content/syntensity.com/wiki/8203056993995857140"><div><a href="../index.html">Creating</a> &gt; </div><h3><span class="entry-title">Assets</span></h3><div><div class="entry-content"><div xmlns='http://www.w3.org/1999/xhtml'><table class='sites-layout-name-one-column sites-layout-hbox' cellspacing='0'><tbody><tr><td class='sites-layout-tile sites-tile-name-content-1'><div dir='ltr'><div>Assets are files, or bundles of files, that contain game-related content and are downloaded automatically. For example, a map asset contains a map geometry file, map script, and other files needed for running a map; a character model asset would contain the mesh, textures, animations, and so forth.<br/><br/><h2><a name='TOC-Creating-Assets'/>Creating Assets</h2>To create a new asset, go to the 'Assets' tab on the website and either select 'Create new asset', or click on an existing asset and clone it. Cloning creates a copy of the asset which you can then modify, without changing the original.<br/><br/><h2><a name='TOC-Asset-Locations'/>Asset Locations</h2>Every asset has a <b>location</b>, which is shown (and you can edit) when you view an asset on the website. The location is the path to where the asset will be downloaded to, relative to /packages/ under the home directory. So if you run the client with home directory <b>local/client</b>, a path of <b>textures/stone.jpg</b> would make the file be downloaded to <b>local/client/packages/textures/stone.jpg</b>.<br/><br/>An asset can also be a bundle of files - an <b>archive asset</b>. Assets whose location ends in .tar.gz are archive assets, and they will therefore be automatically unpacked when downloaded, into a directory of the same name (but without .tar.gz). For example, a map asset with location <b>base/mymap.tar.gz</b> would be unpacked into <b>base/mymap/</b> (as a map asset, it would have files like map.js, map.ogz, etc. - see <a href='../../creating/creat/index.html'>Creating a New Map</a>).<br/><ul><li><b>Important</b>: Archive assets need their files to be files in the root directory of the archive. That is, the archive should simply contain the files, instead of the archive containing a directory which contains the files.<br/></li></ul><br/>In general you can pick any location for your assets. Some kinds of content need specific types of paths, however:<br/><ul><li>Map assets must be under <b>base/</b></li><li>3D Models must be under <b>models/</b></li><li>Sounds must be under <b>sounds/</b></li></ul>In general, for all assets it's a good idea to pick clear and consistent locations. See the existing assets for examples.<br/><br/><h2><a name='TOC-Uploading-Assets'/>Uploading Assets</h2>After you create an asset, you can upload content for it. Select the asset on the main website, and click 'Upload content'. If the asset is a archive, upload the .tar.gz file.<br/><br/>If you created the asset by cloning an existing asset, it will already contain content - a copy of the content of the original asset that you cloned. You can upload new content to replace that content (the original asset that you cloned will not be affected).<br/><br/>Map assets can also be uploaded from within the client program. When you select 'Upload map...' in the client (when running a map), it packages the map files into an archive - the map asset - and uploads that. (You can also do so manually, that is, create a .tar.gz archive yourself with the appropriate files and upload it on the website.)<br/><br/>You can also upload archive assets in the client program with the cubescript comment <span style='font-family:courier new,monospace'>/upload_asset PATH.tar.gz</span>, for example <span style='font-family:courier new,monospace'>/upload_asset textures/my_pack.tar.gz</span> will upload the asset textures/my_pack.tar.gz. The asset will be packaged (the files in its directory will be prepared in an archive), and uploaded. Note that this method of uploading assets only works for assets the client program is 'familiar' with, and accordingly the uploading is done from the directory of the asset - so this only makes sense if the asset has been downloaded in the past. <b>You must also be logged in to the master to do an upload in this way</b>, as otherwise you have not proven your identity to the master server (but you don't need to be connected to a server instance running a map).<br/><br/>Note that when you let the client program package an archive for you (when doing 'Upload map...' or /upload_asset), it will include all files in the directory, except for backups files (with extension BAK or ~). So if you have a texture package that includes JP2 files from which PNGs are generated, the PNGs will be included, which probably isn't what you want. In that case, either 'clean' the directory before uploading from the client program, or create the archive yourself manually..<br/><br/><h2><a name='TOC-Asset-Downloading'/>Asset Downloading</h2>Assets are downloaded in the following manner:<br/></div><ul><li>Every activity (like a game) has a 'map asset' - the asset which is the map for that activity, see <a href='../../creating/creat/index.html'>Creating a New Map</a>. When you play that activity, the asset is downloaded.</li><li>Every asset - including map assets - can have <b>dependencies</b>. Dependencies are assets that will be downloaded with an asset. For example, if your activity uses a custom character model, make the map asset have that character model as a dependency.</li><li>Dependencies are processed recursively, that is, if a dependency itself has dependencies, they will also be downloaded. So, to continue the previous example, if your custom character model has a dependency on a model for a gun, then when the map is played the map asset, character model and gun model will all be downloaded.<br/></li></ul><div>The latest version of an asset is always downloaded: If the existing version is not up to date, the newer one will be downloaded instead. If the existing version is up to date, it will not be downloaded twice. Note that what is actually checked is whether the version you have matches the version the main website believes is the latest. So, if you change a file but don't upload it, and you then run a map that uses that asset, the client program will decide that your version doesn't match what the main website believes is the latest version - and it will download that (older) version, overwriting yours.<br/><br/>Checking if an asset is the latest version is done using a hash - a 'signature' of the file. In general you don't need to understand how this works, but for archive assets there are some special rules:<br/><ul><li>For archive assets, the signature is of the .tar.gz file, <b>not</b> the unpacked directory and files. This makes sense in that the archive is the actual asset, and the unpacked files are just for convenience.</li><li>This means that if you change the unpacked files, the asset system will <b>not</b> decide that the asset you have is different from the latest version on the main website. The asset system only notices changes to the asset file itself, that is, changes to the .tar.gz file.</li><li>This is a feature, not a bug. For example, it is <a href='../../creating/workflow/index.html'>useful for the mapping process</a>.<br/></li></ul><br/><br/></div></div></td></tr></tbody></table></div></div><br /><small>Updated on <abbr class="updated" title="2009-10-05T09:24:59.100Z">Oct 5, 2009</abbr> by <span class="author"><span class="vcard"><a class="fn" href="mailto:alonzakai@syntensity.com">Alon Zakai</a></span></span> (Version <span class="sites:revision">12</span>)</small><br /><br /></div></div></td></tr></table></body></html>