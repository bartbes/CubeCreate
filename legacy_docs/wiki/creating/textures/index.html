<html><head><title>Textures</title></head><body><table width="100%"><tr valign="top"><td width="150px"><table><tr><th align="left">Navigation</th></tr><tr><td><small><a href="../../community/index.html">Community</a></small></td></tr><tr><td><small><a href="../../configuring/index.html">Configuring</a></small></td></tr><tr><td><small><a href="../../creating/index.html">Creating</a></small></td></tr><tr><td><small><a href="../../faq---general/index.html">FAQ - General</a></small></td></tr><tr><td><small><a href="../../info-for-sauerbraten-users/index.html">Info for Sauerbraten Users</a></small></td></tr><tr><td><small><a href="../../introduction/index.html">Introduction</a></small></td></tr><tr><td><small><a href="../../known-issues/index.html">Known Issues</a></small></td></tr><tr><td><small><a href="../../home/index.html">Main Page</a></small></td></tr><tr><td><small><a href="../../notes/index.html">Notes</a></small></td></tr><tr><td><small><a href="../../playing/index.html">Playing</a></small></td></tr><tr><td><small><a href="../../troubleshooting/index.html">Troubleshooting</a></small></td></tr></table></td><td>&#160;</td><td><div class="hentry webpage" id="http://sites.google.com/feeds/content/syntensity.com/wiki/4961003512555818116"><div><a href="../index.html">Creating</a> &gt; </div><h3><span class="entry-title">Textures</span></h3><div><div class="entry-content"><div xmlns='http://www.w3.org/1999/xhtml'><table class='sites-layout-name-one-column sites-layout-hbox' cellspacing='0'><tbody><tr><td class='sites-layout-tile sites-tile-name-content-1'><div dir='ltr'>Textures can be defined, for maps and for models, using the Cube 2 commands as documented there, but 'translated' into JavaScript. For example, <b>texture n sometex.png</b> would be <b>Map.texture("n", "sometext.png");</b>, and <b>md5skin somemesh sometexture.png</b> would be <b>Map.md5Skin("somemesh", "sometexture.png");</b>. See the existing assets for examples.<br/><br/><h2><a name='TOC-Using-textures-in-your-maps'/>Using textures in your maps</h2>There are 2 things you need to do to use textures:<br/><ul><li> First you
need to add the texture packs as dependencies to the asset. This is
done on the website. Without this, the texture packs won't be
downloaded for people that don't have them yet. (But it will work for
people that already have them, even if you don't do this, so be careful.)</li><li>Then you need to define the textures in the map script. The commands generally look like this:<br/><br/><span style='font-family:courier new,monospace'>    Library.include('textures/gk/concrete3/');</span><br style='font-family:courier new,monospace'/><br/>You
can copy them from an existing map. Or cloning that map (or using the
map creation wizard) will get both the dependencies and the map script
stuff.</li></ul><br/><h2><a name='TOC-Clarifications-to-the-Cube-2-docume'/>Clarifications to the Cube 2 documentation</h2><ul><li>For world geometry (cube) textures (<b>Map.texture</b>), if a diffuse ("0" or "c", usually with name ending in _cc) texture has an alpha channel, the alpha channel is used as a specularity map. So you don't need to define a specularity map explicitly. Likewise, if a normal map ("n", usually with name ending in _nm) has an alpha channel, the alpha channel is used as a height (parallax) map.</li><li>For model textures (<b>Map.md5Skin</b>, etc.), alpha channels are not used in such a way. For specularity maps, they can be used as part of a masks texture as described in the md5skin documentation in Cube 2. Heightmaps can't be used in model textures.</li><li>You can compress textures, using DDS files or the &lt;compress> tag on the texture. Note however that compressed textures have the limitation that, if you want a specularity map, it must be in the alpha channel, and not as a separate texture. The same holds for height maps. (The reason is that the engine always places specularity maps and height maps as alpha channels - that is how they are actually stored on the graphics card. When given two separate textures - diffuse and specularity, or normal and height - the engine will combine them manually. The problem is then that compressed textures cannot be manipulated by the engine in such a manual way. Instead, you must do the combining in the external tool that creates the compressed texture).</li><ul><li>The engine is fairly smart about fallbacks and secondary textures. For example, if you define a primary texture as "&lt;dds>mytex.jpg", and a specularity map as "mytex_spec.jpg", then the engine will try to load mytex.dds, if it can (most modern graphics cards can). An alpha channel, if present in the dds file, will be used as a specularity map - so the command to use "mytex_spec.jpg" will be ignored, as it should (again, this is due to it not being possible to combine compressed images). If, on the other hand, the dds isn't used (the hardware doesn't support it, or it isn't present), then "mytex_spec.jpg" will be used as a specularity map, as you would expect (for which, behind the scenes it will be placed in the alpha channel by the engine).<br/></li></ul></ul><h2><a name='TOC-Additional-Syntensity-Functionality'/>Additional Syntensity Functionality</h2><ul><li>Your texture scripts can convert JPEG2000 files into PNG format, using<br/><br/><div style='margin-left:40px'><b>Map.convertJP2toPNG('path/to/original.jp2');</b><br/></div><br/>The output file will have extension .png.<br/><br/>The conversion is only done if the original is newer than the output, or the output doesn't exist (so this is done only once each time the original changes).<br/><br/></li><li>You can combine two textures into one, with the second placed in the alpha channel of the new image, using<br/><br/><div style='margin-left:40px'><b>Map.combineImages('path/to/primary.ext', 'path/to/secondary.ext', 'path/to/combined.ext')</b>;<br/></div><br/>For example,<br/><br/><div style='margin-left:40px'><b>Map.combineImages('textures/rock_cc.png', textures/rock_sc.png', 'textures/rock_ccsc.png')</b>;<br/>
</div>
<br/>The conversion is only done if at least one of the originals is newer than the output,
or the output doesn't exist (so this is done only once each time at least one of the
originals changes).<br/><br/></li><li>A typical usage of these commands is as follows (this is automatically created by <b>tools/create_tex_config.py</b>). This decompresses diffuse and a specularity textures from JPEG2000 into PNG format, combines them into one file (the specularity placed into the alpha channel), and creates a DDS of that file. The final texture can then be used as "&lt;dds>textures/rock_ccsc.png".<br/><br/></li><ul style='font-family:courier new,monospace'><li><font size='2'>Map.convertJP2toPNG('textures/rock_cc.jp2');</font></li><li><font size='2'>Map.convertJP2toPNG('textures/rock_sc.jp2');</font></li><li><font size='2'>Map.combineImages('textures/rock_cc.png', textures/rock_sc.png', 'textures/rock_ccsc.png');</font></li></ul></ul></div></td></tr></tbody></table></div></div><br /><small>Updated on <abbr class="updated" title="2009-10-26T17:06:54.856Z">Oct 26, 2009</abbr> by <span class="author"><span class="vcard"><a class="fn" href="mailto:alonzakai@syntensity.com">Alon Zakai</a></span></span> (Version <span class="sites:revision">9</span>)</small><br /><br /></div></div></td></tr></table></body></html>